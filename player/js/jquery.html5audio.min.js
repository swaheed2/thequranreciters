(function(f){f.fn.html5audio=function(e){function d(){var a=0==k.find("div[class='fontMeasure']").length?f("<div/>").addClass("fontMeasure").appendTo(k):k.find("div[class='fontMeasure']");ua=new apTextScroller;ua.init(a,nb,he,"left",e.scrollSeparator,e.scrollSpeed)}function ob(a){if(m&&!y&&!ga){if(!Fb){if(Ja){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();Fb=!0;Qa.on(pb,function(a){a:{var c;if(Ja){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;
else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();oa(c)}}).on(qb,function(a){a:if(Fb){Fb=!1;Qa.off(pb).off(qb);var c;if(Ja){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;
a.preventDefault();oa(c)}})}return!1}}function oa(a){"horizontal"==Gb?C=Math.max(0,Math.min(1,(a.pageX-rb.offset().left)/ia)):(C=Math.max(0,Math.min(1,(a.pageY-rb.offset().top)/ia)),C=1-C);q()}function M(){if(!m||y)return!1;hc?(C=Dc,hc=!1):(Dc=C,C=0,hc=!0)}function q(){"horizontal"==Gb?ic.css("width",C*ia+"px"):ic.css("height",C*ia+"px");V&&("youtube"==ca?X?A&&A.setVolume(C):"undefined"!==typeof l(D)&&l(D).pb_setVolume(C):Q?p&&(p.volume=C):"undefined"!==typeof l(w)&&l(w).pb_setVolume(C));0<C?k.find(".player_volume").find("img").attr("src",
id):k.find(".player_volume").find("img").attr("src",jd);isMobile&&Hb&&(W&&clearTimeout(W),W=setTimeout(jc,kc))}function I(){Hb&&W&&clearTimeout(W);Ma.css("display","block");ja.on("mousemove",N).on("mouseout",n);Qa.on("mouseout",n)}function n(){Hb&&(W&&clearTimeout(W),W=setTimeout(jc,kc));Ma.css("display","none");ja.off("mousemove",N).off("mouseout",n);Qa.off("mouseout",n)}function N(a){if("horizontal"==Gb){var b=a.pageX-rb.offset().left;if(!t(b))return!1;0>b?b=0:b>ia&&(b=ia);a=parseInt(a.pageX-ja.offset().left-
Ma.width()/2,10);Ma.css("left",a+"px");b=Math.max(0,Math.min(1,b/ia));b=parseInt(100*b,10)}else{b=a.pageY-rb.offset().top;if(!t(b))return!1;0>b?b=0:b>ia&&(b=ia);a=parseInt(b-Ma.height()/2,10);Ma.css("top",a+ie+"px");b=Math.max(0,Math.min(1,b/ia));b=parseInt(100*(1-b),10)}Ma.find("p").html(b+" %")}function R(a){if(m&&!y&&V&&!Fb&&!lc){if(!ga){if(Ja){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();ga=!0;Qa.on(pb,function(a){a:{var c;if(Ja){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=
a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();pa(c,a)}}).on(qb,function(a){va(a)})}return!1}}function va(a){if(ga){ga=!1;Qa.off(pb).off(qb);var b;if(Ja){if(a.originalEvent.touches&&a.originalEvent.touches.length)b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;
else return!1;if(1<b.length)return!1;b=b[0]}else b=a;a.preventDefault();pa(b,a)}if(da)var c=setTimeout(function(){c&&clearTimeout(c);Ec=!1},500);return!1}function pa(a,b){if(!da){db=a.pageX-mc.offset().left;0>db?db=0:db>J&&(db=J);wa.width(db);var c=Math.max(0,Math.min(1,db/J))}else if(xa){if(Fc(b)){if(Gc||kd>ld-je)return!1;ga||(Ib(!0),K.clearRect(0,0,ka,qa),Ra(ra),ya());return!1}if(!Gc)return!1;Ec=!0;var c=a.pageX-Na.offset().left-ka/2,h=a.pageY-Na.offset().top-qa/2,c=Math.atan2(h,c);c>-1*Math.PI&&
c<-.5*Math.PI&&(c=2*Math.PI+c);ra=c=Math.max(0,Math.min((c+Math.PI/2)/2*Math.PI*10))/100;K.clearRect(0,0,ka,qa);Ra(ra);ya()}if(!t(c))return!1;Jb=ra;za(c)}function za(a){"youtube"==ca?X?(a=(a*A.getDuration()).toFixed(1),t(a)&&A.seek(a)):"undefined"!==typeof l(D)&&l(D).pb_seek(a):Q?p&&p.seekable&&0<p.seekable.length&&(!ke||isMobile?p.currentTime=a*p.duration:a*p.duration>=p.buffered.end(0)-5?p.currentTime=p.buffered.end(0)-5:p.currentTime=a*p.duration):"undefined"!==typeof l(w)&&l(w).pb_seek(a)}function Y(){V&&
(Aa.css("display","block"),Za.on("mousemove",eb).on("mouseout",la),Qa.on("mouseout",la))}function la(){V&&(Aa.css("display","none"),Za.off("mousemove",eb).off("mouseout",la),Qa.off("mouseout",la))}function eb(a){if(!da){var b=a.pageX-mc.offset().left;if(!t(b))return!1;0>b?b=0:b>J&&(b=J);a=parseInt(a.pageX-Za.offset().left-Aa.width()/2,10);Aa.css("left",a+"px");b=Math.max(0,Math.min(1,b/J))}else if(xa){if(Fc(a))return Aa.css("display","none"),!1;b=a.pageX-Na.offset().left;a=a.pageY-Na.offset().top;
a=Math.atan2(a-qa/2,b-ka/2);a>-1*Math.PI&&a<-.5*Math.PI&&(a=2*Math.PI+a);b=Math.max(0,Math.min((a+Math.PI/2)/2*Math.PI*10))/100;Aa.css("display","block")}if(!t(b))return!1;$a(b)}function $a(a){if(!t(a))return!1;var b,c;"youtube"==ca?X?(c=A.getDuration(),b=a*c):"undefined"!==typeof l(D)&&(c=l(D).pb_getFlashDuration(),b=a*c):Q?p&&(c=p.duration,b=a*c):"undefined"!==typeof l(w)&&(c=l(w).pb_getFlashDuration(),b=a*c);if(t(b)&&t(c))Aa.find("p").html(Kb(b)+md+Lb(c));else return!1}function Ra(a){K.beginPath();
K.arc(ka/2,qa/2,Hc-Mb/2,-nc,nd*a-nc,!1);K.strokeStyle=Ic;K.lineCap="butt";K.lineWidth=Mb;K.stroke()}function Z(a){ab.beginPath();ab.arc(ka/2,qa/2,Hc-Mb/2,-nc,nd*a-nc,!1);ab.strokeStyle=le;ab.lineCap="butt";ab.lineWidth=Mb;ab.stroke()}function ya(){if(E)a=62,b=57,K.fillStyle=Ic,K.fillRect(a,b,14,45),K.fillRect(a+23,b,14,45);else{var a=65,b=57,c=65-a,h=102-b,g=Math.atan2(h,c)-Math.PI/3,h=Math.sqrt(c*c+h*h),c=Math.cos(g)*h+a,g=Math.sin(g)*h+b;K.beginPath();K.fillStyle=Ic;K.moveTo(a,b);K.lineTo(65,102);
K.lineTo(c,g);K.fill()}}function Fc(a){var b;if(Ja){if(a.originalEvent.touches&&a.originalEvent.touches.length)a=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)a=a.originalEvent.changedTouches;else return!1;if(1<a.length)return!1;b=a[0]}else b=a;a=b.pageX-Na.offset().left;b=b.pageY-Na.offset().top;var c=ka/2,h=qa/2;kd=Math.sqrt((a-c)*(a-c)+(b-h)*(b-h));return Math.sqrt((a-c)*(a-c)+(b-h)*(b-h))<ld}function Jc(a){if(0!=k.find(".componentPlaylist").length)if(aa)"vertical"==
Nb?Oa.outerHeight(!0)>=sb.height()?(aa.reinitialise(),a&&(aa.scrollToY(0),f(".jspPane").css("top","0px"))):(aa.destroy(),aa=null):(aa.reinitialise(),a&&(aa.scrollToX(0),f(".jspPane").css("left","0px")));else if(a=k.find(".componentPlaylist"),aa=a.jScrollPane().data().jsp,a.on("jsp-initialised",function(a,c){}).jScrollPane({mouseWheelSpeed:20}),"horizontal"==Nb&&!isMobile)a.on("mousewheel",me)}function me(a,b,c,h){if(!m||y)return!1;aa&&aa.scrollByX(100*(0<b?-1:1));return!1}function Ib(a){if(E){if("youtube"==
ca){if(!Sa)return!1;X?A.togglePlayback():("undefined"!==typeof l(D)&&l(D).pb_togglePlayback(),V=!0)}else Q?p&&p.pause():"undefined"!==typeof l(w)&&l(w).pb_pause();E=!1;Ka("off")}else{if("youtube"==ca){if(!Sa)return!1;X?isMobile?!Ob&&ea?(m=!1,oc("on")):A.togglePlayback():A.togglePlayback():("undefined"!==typeof l(D)&&l(D).pb_togglePlayback(),V=!0)}else Q?p&&p.play():"undefined"!==typeof l(w)&&l(w).pb_play();E=!0;fb("off")}if(!a)return!1}function od(a){if(!m||y)return!1;a||(a=window.event);a.cancelBubble?
a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=f(a.currentTarget);var b=a.attr("data-id");if(a.closest(".playlistItem").hasClass(Pb))return!1;ea=!0;Pa();u.processPlaylistRequest(b);return!1}function ne(a){if(!m||y)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=f(a.currentTarget).attr("class").split(" ");if(-1!=f.inArray("controls_prev",a))ea=!0,Pa(),u.advanceHandler(-1,!0);else if(-1!=f.inArray("controls_toggle",a)){if(!V)return;
Ib()}else if(-1!=f.inArray("controls_next",a))ea=!0,Pa(),u.advanceHandler(1,!0);else if(-1!=f.inArray("player_volume",a))isMobile?Hb?(W&&clearTimeout(W),Qb?(ja.css("display","none"),Qb=!1):(ja.css("display","block"),Qb=!0,W=setTimeout(jc,kc))):(M(),q()):(M(),q());else if(-1!=f.inArray("player_download",a)){if(!Ta)if(a=ca){var b=u.getCounter(),c=B[b].download,b=Kc(b,!1);a=pd(a,b,c);qd(a.name,a.path)}else v&&alert("Invalid data-type for file download function! Quitting."),Ta=!1}else-1!=f.inArray("player_loop",
a)?(Ba?(k.find(".player_loop").find("img").attr("src",pc),Ba=!1):(k.find(".player_loop").find("img").attr("src",Rb),Ba=!0),u.setLooping(Ba)):-1!=f.inArray("player_shuffle",a)&&(Ca?(k.find(".player_shuffle").find("img").attr("src",qc),Ca=!1):(k.find(".player_shuffle").find("img").attr("src",Sb),Ca=!0),u.setRandom(Ca));return!1}function oe(a){if(m)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=f(a.currentTarget).attr("class").split(" "),-1!=f.inArray("controls_prev",
a)?k.find(".controls_prev").find("img").attr("src",pe):-1!=f.inArray("controls_toggle",a)?E?fb("on"):Ka("on"):-1!=f.inArray("controls_next",a)?k.find(".controls_next").find("img").attr("src",qe):-1!=f.inArray("player_volume",a)?0<C?k.find(".player_volume").find("img").attr("src",re):k.find(".player_volume").find("img").attr("src",se):-1!=f.inArray("player_download",a)?k.find(".player_download").find("img").attr("src",te):-1!=f.inArray("player_loop",a)?Ba?k.find(".player_loop").find("img").attr("src",
pc):k.find(".player_loop").find("img").attr("src",Rb):-1!=f.inArray("player_shuffle",a)&&(Ca?k.find(".player_shuffle").find("img").attr("src",qc):k.find(".player_shuffle").find("img").attr("src",Sb)),!1}function ue(a){if(m)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=f(a.currentTarget).attr("class").split(" "),-1!=f.inArray("controls_prev",a)?k.find(".controls_prev").find("img").attr("src",ve):-1!=f.inArray("controls_toggle",a)?E?fb("off"):Ka("off"):
-1!=f.inArray("controls_next",a)?k.find(".controls_next").find("img").attr("src",we):-1!=f.inArray("player_volume",a)?0<C?k.find(".player_volume").find("img").attr("src",id):k.find(".player_volume").find("img").attr("src",jd):-1!=f.inArray("player_download",a)?k.find(".player_download").find("img").attr("src",xe):-1!=f.inArray("player_loop",a)?Ba?k.find(".player_loop").find("img").attr("src",Rb):k.find(".player_loop").find("img").attr("src",pc):-1!=f.inArray("player_shuffle",a)&&(Ca?k.find(".player_shuffle").find("img").attr("src",
Sb):k.find(".player_shuffle").find("img").attr("src",qc)),!1}function Pa(){if(!sa&&-1!=u.getCounter()){var a=f(Ua[u.getCounter()]);if(a&&a.hasClass("playlistSelected")){var b=a.attr("data-id");a.removeClass("playlistSelected").addClass("playlistNonSelected");"undefined"!==typeof playlistItemEnabled&&playlistItemEnabled(O,L,a,b)}}}function rd(){if(!sa){var a=f(Ua[u.getCounter()]);if(a&&a.hasClass("playlistNonSelected")){var b=a.attr("data-id");a.removeClass("playlistNonSelected").addClass("playlistSelected");
"undefined"!==typeof playlistItemDisabled&&playlistItemDisabled(O,L,a,b)}}}function Lc(){var a=e.activeItem;t(a)&&-1!=a?(0>a?a=0:a>F-1&&(a=F-1),u.setCounter(a,!1)):ea=!0}function sd(){x&&-1!=u.getCounter()&&(Tb(),td(),Pa())}function Ub(){Tb();td();var a=0,b;for(a;a<F;a++)b=f(Ua[a]).off("click",od),ud&&!isMobile&&b.off("mouseenter").off("mouseleave");x&&(x.children().each(function(){var a=f(this);a.data("hap_wrap_player")&&a.data("hap_wrap_player").destroyPlaylist()}),x.empty(),x=null);Oa.empty();
sa=Vb=!1;rc=P=r=null;tb=ub=Wb=!1;vb=null;u.reSetCounter();B=[];Ua=[];S=[];aa&&aa.reinitialise()}function Tb(){sc&&(X?A&&A.stop():"undefined"!==typeof l(D)&&l(D).pb_dispose(),sc=!1);Q?(ha&&clearInterval(ha),p&&(p.pause(),p.src=""),Xb&&Xb.off("ended pause play canplay canplaythrough loadedmetadata")):"undefined"!==typeof l(w)&&l(w).pb_dispose();Mc();rc?tc.css("display","block"):tc.css("display","none");Jb=null;Nc=V=E=lc=!1;Oc||(Yb=void 0)}function vd(a){if("undefined"===typeof a)return v&&alert("setPlaylist method requires data parameter. loadPlaylist failed."),
!1;if("undefined"===typeof a.hidden)return v&&alert("setPlaylist method requires data.hidden parameter. loadPlaylist failed."),!1;var b=ye(a.hidden);if("undefined"===typeof a.id)return v&&alert("setPlaylist method requires data.id parameter. loadPlaylist failed."),!1;a=a.id;y=!0;wd||(wd=!0);xd();Oa.css("opacity",0);x&&Ub();Vb=!1;sa=b;yd&&isIE?(b=f(bb.find(a).css("display","block").clone().wrap("<p>").parent().html()),f(bb.find(a).css("display","none"))):(b=bb.find(a).css("display","block").clone(),
bb.find(a).css("display","none"));b.css("fontSize",0);if(0==b.length)return v&&alert('Failed to select playlist! Make sure that element: "'+a+'" exist in playlist list! Quitting.'),Pc(),!1;if(sa)wb.empty(),b.appendTo(wb),Da=0,tb=ub=gb=!0,x=Qc;else{if(!aa&&0==Oa.length)return v&&alert("playlist_inner html element seems to be missing! You could be trying to use loadPlaylist method without having necessary html elements inside componentWrapper. Quitting."),!1;b.appendTo(Oa);x=b}B=[];Ua=[];S=[];G=[];
b.find("li[class*='playlistItem']").each(function(){G.push(f(this))});T()}function T(){G.length?ze():Ae()}function ze(){uc=fa=U=P=ma=null;Rc=!1;var a=G[0],b=a.attr("data-type").toLowerCase(),c=a.attr("data-path"),h=a.hasClass(zd);z=[];a.hasClass(Ad)&&(Rc=!0);void 0==a.attr("data-plink")||H(a.attr("data-plink"))||(ma=a.attr("data-plink"));void 0!=a.attr("data-dlink")&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?H(a.attr("data-dlink"))||(P=a.attr("data-dlink")):P=H(a.attr("data-dlink"))?
!0:a.attr("data-dlink"));void 0!=a.attr("data-download")&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?H(a.attr("data-download"))||(U=a.attr("data-download")):U=H(a.attr("data-download"))?!0:a.attr("data-download"));void 0==a.attr("data-thumb")||H(a.attr("data-thumb"))||(fa=a.attr("data-thumb"));H(f.trim(a.html()))||(uc=a.html());if(h)r=a,G.shift(),T();else if("local"==b)r=a,G.shift(),T();else if("soundcloud"==b)r=a.data("toremove","true"),Zb=0,vc(c);else if("podcast"==b)r=
a.data("toremove","true"),h="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=xml&num="+Be+"&callback=?&q="+encodeURIComponent(c),f.ajax({type:"GET",url:h,dataType:"jsonp",cache:!1}).done(function(a){if(null==a.responseData)v&&alert("Playlist process failed, podcast: "+c),r&&"true"==r.data("toremove")&&r.remove(),G.shift(),T();else{if(ieBelow9){a=Ce(a.responseData.xmlString);var b;f(a).find("item").each(function(){b=f(this);e={type:"podcast"};e.mp3=b.find("enclosure").attr("url");e.ogg=
"";e.title=b.find("title").text();0<b.find("media\\:thumbnail").length?b.find("media\\:thumbnail").attr("url")?e.thumb=b.find("media\\:thumbnail").attr("url"):fa&&(e.thumb=fa):fa&&(e.thumb=fa);ma&&(e.url=ma);P&&(e.dlink=P);U&&(e.download=U);z.push(e)})}else{Bd.html(a.responseData.xmlString);a=Bd.get(0).getElementsByTagName("item");var h=0,g=a.length,d,k,e;for(h;h<g;h++)d=a[h],void 0!=d.getElementsByTagName("enclosure")[0]&&(e={type:"podcast"},e.mp3=d.getElementsByTagName("enclosure")[0].getAttribute("url"),
e.ogg="",void 0!=d.getElementsByTagName("itunes:duration")[0]&&(k=De(d.getElementsByTagName("itunes:duration")[0].childNodes[0].nodeValue),e.length=parseInt(1E3*k,10)),void 0!=d.getElementsByTagName("media:thumbnail")[0]?void 0!=d.getElementsByTagName("media:thumbnail")[0].getAttribute("url")?e.thumb=d.getElementsByTagName("media:thumbnail")[0].getAttribute("url"):fa&&(e.thumb=fa):fa&&(e.thumb=fa),e.title=d.getElementsByTagName("title")[0].childNodes[0].nodeValue,ma&&(e.url=ma),P&&(e.dlink=P),U&&
(e.download=U),z.push(e))}Va()}}).fail(function(a,b,h){v&&alert("Parse feed error: "+a.responseText);v&&alert("Playlist process failed, podcast: "+c);r&&"true"==r.data("toremove")&&r.remove();G.shift();T()});else if("folder"==b){r=a.data("toremove","true");var h=hap_source_path+"folder_parser.php",g=!0;void 0!=a.attr("data-subdirs")&&"false"==a.attr("data-subdirs")&&(g=!1);g={dir:c,subdirs:g};f.ajax({type:"GET",url:h,data:g,dataType:"json"}).done(function(a){Ee(a,"title");var b=0,c=a.length,h,g;Cd&&
(cb=z.length?z.length-1:0);for(b;b<c;b++)if(h=a[b],g=h.path,g=g.replace(/\\'/g,"'"),g=g.replace(/\\"/g,'"'),g=g.replace(/\\0/g,"\x00"),path=g=g.replace(/\\\\/g,"\\"),g={type:"folder"},/.mp3/.test(path)){g.mp3=path;g.ogg=path.substr(0,path.lastIndexOf("."))+".ogg";var d=path.substr(0,path.lastIndexOf("."));title=/\//i.test(d)?d.substr(d.lastIndexOf("/")+1):d;title=title.split("_").join(" ");g.title=title;g.thumb=path.substr(0,path.lastIndexOf("."))+".jpg";g.size=parseInt(h.size,10);g.lastmod=parseInt(h.lastmod,
10);ma&&(g.url=ma);P&&(g.dlink=P);U&&(g.download=U);fa&&(g.thumb=fa);z.push(g)}z.length&&Cd?Dd():Va()}).fail(function(a,b,h){v&&alert("Read folder error! Make sure you run this online or on local server!");v&&alert("Playlist process failed, folder: "+c);r&&"true"==r.data("toremove")&&r.remove();G.shift();T()})}else if("xml"==b){r=a;var h=hap_source_path+c,d,k=[];f.ajax({type:"GET",url:h,dataType:"html",cache:!1}).done(function(b){G.shift();f(b).find("li[class='playlistItem']").each(function(){d=Sc(f(this));
r?r.after(f(d)):0<x.children().size()?f(d).prependTo(x):f(d).appendTo(x);r=f(d);k.push(f(d))});b=0;var c=k.length;k.reverse();for(b;b<c;b++)G.unshift(k[b]);k=null;a.remove();T()}).fail(function(a,b,h){v&&alert("Playlist process failed, xml: "+c);r&&r.remove();G.shift();T()})}else if("database_data"==b||"database_html"==b)if(void 0==a.attr("data-table")||H(a.attr("data-table")))v&&(alert("Database table missing!"),alert("Playlist process failed, database query: "+c)),G.shift(),T();else{var e=g=null,
l=null;void 0==a.attr("data-limit")||H(a.attr("data-limit"))||(g=parseInt(a.attr("data-limit"),10));void 0==a.attr("data-range")||H(a.attr("data-range"))||(h=a.attr("data-range").split(","),2==h.length&&(e=h[0],l=h[1]));r=a;h=hap_source_path+"includes/database.php";k=[];g={db_name:c,db_table:a.attr("data-table"),db_type:b,limit:g,range_from:e,range_to:l};f.ajax({type:"POST",url:h,data:g}).done(function(h){if(-1<h.indexOf("Database information missing!")||-1<h.indexOf("Db connection failed")||-1<h.indexOf("Db selection failed")||
-1<h.indexOf("Db query failed"))v&&(alert(h),alert("Playlist process failed, database query: "+c)),r&&r.remove(),G.shift();else{G.shift();h=f.parseJSON(h);var g=0,e=h.length,l;for(g;g<e;g++){l=h[g];if("database_data"==b)if(l.type&&l.mp3||l.path)d=Ed(l);else continue;else if(l.path)d=Sc(l.path);else continue;r?r.after(f(d)):0<x.children().size()?f(d).prependTo(x):f(d).appendTo(x);r=f(d);k.push(f(d))}g=0;e=k.length;k.reverse();for(g;g<e;g++)G.unshift(k[g]);k=null;a.remove()}T()}).fail(function(a,b,
h){v&&alert("Playlist process failed, database query: "+c);r&&r.remove();G.shift();T()})}else"youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?(r=a.data("toremove","true"),Fd.setData({type:b,path:c})):"ofm_single"==b?(r=a.data("toremove","true"),Wa=[],Wa.push({id:c,type:b}),$b()):"ofm_playlist"==b||"ofm_project"==b?(r=a.data("toremove","true"),Tc=b,wc=c,Wa=[],xb=1,Gd()):(v&&alert("Invalid playlist data-type attribute!"),G.shift(),T())}function Va(){if(z.length){var a,b,c=0,h=z.length,
g,d;for(c;c<h;c++)g=z[c],a=f('<li class="playlistItem" data-type="'+g.type+'"data-mp3="'+g.mp3+'" data-ogg="'+g.ogg+'" data-thumb="'+g.thumb+'"></li>'),d=g.mp3,/\.(mp3)$/i.test(g.mp3)||(d+=".mp3"),Rc&&a.addClass(Ad),g.url&&a.attr("data-plink",g.url),g.dlink&&(1!=g.dlink&&"true"!=g.dlink?a.attr("data-dlink",g.dlink):a.attr("data-dlink",d)),g.download&&(1!=g.download&&"true"!=g.download?a.attr("data-download",g.download):a.attr("data-download",d)),g.title&&a.attr("data-title",g.title),g.thumb&&("//"==
g.thumb.substr(0,2)&&(g.thumb="http:"+g.thumb),a.attr("data-thumb",g.thumb)),g.length&&a.attr("data-length",g.length),"title"==Xa?b=f('<a class="playlistNonSelected" href="#">'+g.title+"</a>").appendTo(a):"thumb"==Xa?b=f('<a class="playlistNonSelected" href="#"><img src="'+g.thumb+'" alt="thumb"/></a>').appendTo(a):"all"==Xa&&(b=f('<a class="playlistNonSelected" href="#"></a>').appendTo(a),f('<span class="hap_thumb"><img src="'+g.thumb+'" alt="thumb"/></span>').appendTo(b),f('<span class="hap_title"><p>'+
g.title+"</p></span>").appendTo(b)),uc&&b.after(uc),r?(r.after(a),"true"==r.data("toremove")&&r.remove()):a.appendTo(x),r=a}G.shift();T()}function Ae(){if(Wb||ub){var a=0;r=null;var b;wb.find("li[class*='playlistItem']").each(function(){b=f(this);r?r.after(b):gb?b.appendTo(x):x.children().eq(Da).before(b);r=b;a++});wb.empty()}xc();Oa.css("opacity",1);m||Hd();r=null;y=!1;Pc();if(0<F){if(Wb||ub){var c=u.getCounter();u.setPlaylistItems(F,!1);Da<=c&&(gb||u.reSetCounter(c+a));tb&&(tb=!1,Lc())}else u.setPlaylistItems(F),
Lc();hb&&Ya()}ub=Wb=!1;0==F&&"undefined"!==typeof playlistEmpty&&playlistEmpty(O,L);"undefined"!==typeof audioPlayerPlaylistLoaded&&audioPlayerPlaylistLoaded(O,L);Vb=!0}function xc(){B=[];S=[];Ua=[];if(0==x.length)return v&&alert("lastPlaylist html element seems to be missing! You could be trying to use addTrack method without having necessary html elements inside componentWrapper. Quitting."),!1;var a=0,b,c,h=x.find("li"),g=h.length,d,e,k,l,n,p,r,q,t,w;ac=0;for(a;a<g;a++){c=f(h[a]).addClass(zd);
S.push(c);Uc&&c.addClass(Pb);ac="horizontal"==Nb?ac+c.outerWidth(!0):ac+c.outerHeight(!0);b=c.find("a[class=playlistNonSelected]");0==b.length&&(b=c.find("a[class=playlistSelected]"));b.off().on("click",od).attr("data-id",a);Ua.push(b);if(ud&&!isMobile)b.on("mouseenter",function(a){if(!m||y)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=f(a.currentTarget).attr("data-id");var b=f(Ua[a]),c=!1;u.getCounter()==a&&(c=!0);"undefined"!==typeof playlistItemRollover&&
playlistItemRollover(O,L,b,a,c);return!1}).on("mouseleave",function(a){if(!m||y)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=f(a.currentTarget).attr("data-id");var b=f(Ua[a]),c=!1;u.getCounter()==a&&(c=!0);"undefined"!==typeof playlistItemRollout&&playlistItemRollout(O,L,b,a,c);return!1});d="";void 0!=c.attr("data-title")?d=c.attr("data-title"):"title"==Xa?d=b.html():"thumb"!=Xa&&"all"==Xa&&(d=b.find("span[class=hap_title]").find("p").html());
Vc&&(e=Wc(a)+Xc+d,b.html(e));c=f(S[a]).attr({"data-id":a,"data-title":d});k=e=p=n="";l=void 0;w=t=q=r=null;void 0!=c.attr("data-mp3")&&(n=c.attr("data-mp3"));void 0!=c.attr("data-ogg")&&(p=c.attr("data-ogg"));void 0!=c.attr("data-type")&&(e=c.attr("data-type"));void 0!=c.attr("data-origtype")&&(k=c.attr("data-origtype"));void 0==c.attr("data-length")||H(c.attr("data-length"))||(l=c.attr("data-length"));"youtube"==e?(void 0==c.attr("data-download")||H(c.attr("data-download"))||(r=c.attr("data-download")),
void 0==c.attr("data-dlink")||H(c.attr("data-dlink"))||(q=c.attr("data-dlink"))):(void 0!=c.attr("data-download")&&(r=H(c.attr("data-download"))||"true"==c.attr("data-download")?n:c.attr("data-download")),void 0!=c.attr("data-dlink")&&(q=H(c.attr("data-dlink"))||"true"==c.attr("data-dlink")?n:c.attr("data-dlink")));void 0==c.attr("data-plink")||H(c.attr("data-plink"))||(t=c.attr("data-plink"));void 0==c.attr("data-thumb")||H(c.attr("data-thumb"))||(w=c.attr("data-thumb"));sa||(t&&0==c.find("a[class=plink]").length&&
(t=f('<a class="plink" href="'+t+'" target="_blank"><img src="'+Id+'" alt="purchase"/></a>'),b.after(t)),q&&0==c.find("a[class=dlink]").length&&(q=f('<a class="dlink" href="#" data-dlink="'+q+'"><img src="'+Jd+'" alt="download"/></a>'),b.after(q),H(c.attr("data-dlink"))),Kd&&0==c.find("a[class=premove]").length&&(c=f('<a class="premove" href="#"><img src="'+Fe+'" alt="remove"/></a>'),b.after(c)));B.push({id:a,type:e,origtype:k,title:d,mp3:n,ogg:p,length:l,download:r,thumb:w})}h=null;F=B.length;sa||
(Ge(),He&&sb.length&&!x.hasClass("ui-sortable")&&(x.on("sortstart",function(a,b){b.helper.css("margin-top",Ld.scrollTop())}),x.on("sortbeforestop",function(a,b){b.helper.css("margin-top",0)}),x.sortable({cursor:"move",update:function(a,b){xc();0<F&&u.setPlaylistItems(F);var c=Oa.find("a[class=playlistSelected]").attr("data-id");c&&(u.reSetCounter(c),hb&&Ya());1==F&&Lc()},receive:function(a,b){"undefined"!==typeof dropReceive&&dropReceive(O,L)}})),Md&&("horizontal"==Nb&&Oa.width(ac),Jc(!0)));return!0}
function Hd(){m=!0;y=!1;Pc();setTimeout(function(){Nd();"horizontal"==Gb?(ia=rb.width(),ic.css("width",C*ia+"px")):(ia=rb.height(),ic.css("height",C*ia+"px"));q()},100);"undefined"!==typeof audioPlayerSetupDone&&audioPlayerSetupDone(O,L)}function Ge(){var a=Ja?ib:"click";k.find("a[class=dlink]").off().on(a,function(a){a.preventDefault();if(Ta)return!1;var c=f(this),h=c.closest(".playlistItem"),g=h.attr("data-id");if(h.hasClass(Pb))return!1;if(void 0==h.attr("data-type")||H(h.attr("data-type")))return v&&
alert("Invalid data-type for file download function! Quitting."),Ta=!1;a=h.attr("data-type");void 0==h.attr("data-origtype")||H(h.attr("data-origtype"))||(a=h.attr("data-origtype"));void 0==c.attr("data-dlink")||H(c.attr("data-dlink"))||(c=c.attr("data-dlink"),g=Kc(g,!1),a=pd(a,g,c),qd(a.name,a.path))});k.find("a[class=plink]").off().on("click",function(a){if(f(this).closest(".playlistItem").hasClass(Pb))return!1});if(Kd)k.find("a[class=premove]").off().on("click",function(a){a.preventDefault();a=
f(this).closest(".playlistItem");var c=parseInt(a.attr("data-id"),10);if(a.hasClass(Pb))return!1;O.removeTrack(c)})}function pd(a,b,c){"local"==a||"folder"==a?(c.indexOf("\\")&&(c=c.replace(/\\/g,"/")),c.match(/^http([s]?):\/\/.*/)||(a=window.location.href,a=a.substr(0,a.lastIndexOf("/")+1),/^\.\.\//i.test(c)&&(c=c.substr(3),"/"==a.charAt(a.length-1)&&(a=a.substr(0,a.lastIndexOf("/"))),a=a.substr(0,a.lastIndexOf("/")+1)),c=a+c),isMobile||(b=0<c.lastIndexOf("/")?c.substr(c.lastIndexOf("/")+1):c)):
"soundcloud"==a&&(c=c.replace(/\/stream\\?/,"/download").replace(/\.mp3/,""));b=b.replace(/[^A-Z0-9\-\_\.]+/ig,"_");/\.(mp3)$/i.test(b)||(b+=".mp3");return{name:b,path:c}}function qd(a,b){if(isMobile)if(Ta=!0,Ie)Od||(Yc=Pd())&&(Od=!0),Yc?Qd(Yc,a,b):Ta=!1;else{var c=Pd();c?Qd(c,a,b):Ta=!1}else Je.attr("src",hap_source_path+"dl?path="+b+"&name="+a)}function Qd(a,b,c){f.ajax({type:"POST",url:hap_source_path+"mail",data:"mail="+a+"&name="+b+"&path="+c}).done(function(a){Ta=!1}).fail(function(a,
b,c){v&&alert("Send email error: "+a.responseText);Rd();Ta=!1});yc.css({marginTop:-yc.height()/2+"px",display:"block"}).stop().animate({opacity:1},{duration:500});bc&&clearTimeout(bc);bc=setTimeout(Rd,Ke)}function Rd(){bc&&clearTimeout(bc);yc.stop().animate({opacity:0},{duration:500,complete:function(){yc.css("display","none")}})}function Pd(){for(var a=prompt("Please enter your email address where download link will be sent:"),b=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;(!b.test(a)||H(a))&&null!=a;)a=
prompt("Please enter a valid email address:");return a}function Le(){f(".hap_text_link").each(function(){var a=f(this),b=a.attr("href");"undefined"!==typeof b&&!1!==b&&-1<b.toLowerCase().indexOf(".mp3")&&a.prepend('<img class="play_link" src="'+zc+'"/>')});f(".hap_text_link, .hap_image_link").click(function(a){if(!m||y)return!1;a=f(this);var b=a.attr("href");if("undefined"===typeof b||!1===b)return!1;if(Yb&&Yb==b)return Ib();Pa();u.reSetCounter();Yb=b;Sd=a;Oc=!0;Ea&&Ea.attr("src",zc);a.hasClass("hap_text_link")&&
(Ea=a.find("img").attr("src",Td));na=Yb;yb=na.substr(0,na.lastIndexOf("."))+".ogg";ea=!0;Q||"undefined"!==typeof l(w)&&l(w).pb_setAutoplay(!0);Tb();Zc();return Oc=!1})}function $b(){Wa.length?Me(Wa.shift()):(0==z.length&&r&&"true"==r.data("toremove")&&r.remove(),z.length>cc&&(z=z.slice(0,cc)),Va())}function Me(a){var b=a.id,c=a.type;a=Ud+"?url="+encodeURIComponent("http://api.official.fm/tracks/"+b+"?fields=streaming,cover&api_version=2");f.ajax({url:a,dataType:"html",cache:!1}).done(function(a){var b=
JSON.parse(a).contents;a={};var d,f;b.track&&b.track.streaming&&b.track.streaming.http&&(b=b.track,a.type=c,a.length=b.duration?b.duration:null,a.mp3=b.streaming.http,a.ogg=b.streaming.http,d=b.artist?b.artist:"Official Fm artist",f=b.title?b.title:"Official Fm track",a.title=d+" - "+f,ma&&(a.url=ma),P&&(a.dlink=P),U&&(a.download=U),b.cover.urls.small?a.thumb=b.cover.urls.small:fa&&(a.thumb=fa),z.push(a));$b()}).fail(function(a,c,d){v&&alert("Playlist process failed, ofm: "+b);$b()})}function Vd(){1<
$c?(xb+=1,xb<=$c&&Wa.length<cc?Gd():Wa.length?$b():(G.shift(),T())):Wa.length?$b():(0==z.length&&r&&"true"==r.data("toremove")&&r.remove(),G.shift(),T())}function Gd(){var a=Ud+"?url="+encodeURIComponent("ofm_playlist"==Tc?"http://api.official.fm/playlists/"+wc+"/tracks?api_version=2&page="+xb+"":"http://api.official.fm/projects/"+wc+"/tracks?fields=cover&api_version=2&page="+xb+"");f.ajax({url:a,dataType:"html",cache:!1}).done(function(a){a=JSON.parse(a).contents;$c=a.total_pages;if(a.tracks&&a.tracks.length){var c=
0,h=a.tracks.length,g;h>cc&&(h=cc);for(c;c<h;c++)g=a.tracks[c].track,g.url&&(g=g.url.substr(g.url.lastIndexOf("/")+1),g=g.substr(0,g.indexOf("?")),Wa.push({id:g,type:Tc}))}Vd()}).fail(function(a,c,h){v&&alert("Playlist process failed, ofm: "+wc);Vd()})}function Ne(){Wd?isMobile?Ob?A.initVideo(na):(m=!1,ad=!0,oc("on")):A.initVideo(na):(dc=0==k.find("div[class='youtubeIframeMain']").length?f("<div/>").css({display:"block",left:"-10000px"}).addClass("youtubeIframeMain").appendTo(k):k.find("div[class='youtubeIframeMain']"),
A=f.youtubePlayer({autoPlay:Xd,defaultVolume:C,mediaPath:na,youtubeHolder:dc,youtubeChromeless:!1,isMobile:isMobile,initialAutoplay:Oe,quality:null,protocol:Pe},e),f(A).on("ap_YoutubePlayer.YT_READY",function(){bd||dc.css("left","-10000px");Sa=!0}),f(A).on("ap_YoutubePlayer.START_PLAY",function(){ha&&clearInterval(ha);ha=setInterval(Qe,250);ad&&(A.stop(),A.initVideo(na),ad=!1);!Ob&&isMobile&&(oc("off"),m=Ob=!0)}),f(A).on("ap_YoutubePlayer.END_PLAY",function(){Ac()}),f(A).on("ap_YoutubePlayer.STATE_PLAYING",
function(){Bc()}),f(A).on("ap_YoutubePlayer.STATE_PAUSED",function(){isMobile?"iPhone"==zb||"iPod"==zb?E&&(E=!1,Ka("off")):Cc():Cc()}),Wd=!0);V=sc=!0}function oc(a){"on"==a?(bd=!0,dc.css({top:"0px",left:"0px"})):(dc.css("left","-10000px"),bd=null)}function Re(){var a=D.substr(1);embedFlashMain(a);a=w.substr(1);embedFlashAudio(a);"undefined"!==typeof l(D)?Fa=setInterval(Se,100):(v&&alert("Problems with flash initialization (startFlashInit)! Flash for youtube not initialized! Sound_id: "+L),Yd())}function Se(){void 0!=
l(D).setData&&(Fa&&clearInterval(Fa),l(D).setData(e),k.find(".flashMain").css("left","-10000px"),Yd())}function Yd(){"undefined"!==typeof l(w)?Fa=setInterval(Te,100):(v&&alert("Problems with flash initialization (checkFlashSound)! Flash audio backup not initialized! Sound_id: "+L),Zd())}function Ue(){var a=w.substr(1);embedFlashAudio(a);var b=setTimeout(function(){b&&clearTimeout(b);"undefined"!==typeof l(w)?Fa=setInterval(Ve,100):(v&&alert("Problems with flash initialization (checkFlashSound_b)! Flash audio backup not initialized! Sound_id: "+
L),Ab())},500)}function Te(){void 0!=l(w).setData&&(Fa&&clearInterval(Fa),l(w).setData(e),k.find(".flashAudio").css("left","-10000px"),Zd())}function Ve(){void 0!=l(w).setData&&(Fa&&clearInterval(Fa),l(w).setData(e),k.find(".flashAudio").css("left","-10000px"),Ab())}function Zd(){if(da){var a=ba.substr(1);embedFlashCircle(a);"undefined"!==typeof l(ba)?Fa=setInterval(We,100):(v&&alert("Problems with flash initialization (checkFlashCircle)! Flash circle backup (canvas support is false) not initialized! Sound_id: "+
L),Ab())}else f(".circleMain").remove(),Ab()}function We(){void 0!=l(ba).setData&&(Fa&&clearInterval(Fa),l(ba).setData(Bb),Ab())}function l(a){"#"==a.charAt(0)&&(a=a.substr(1));return-1!=navigator.appName.indexOf("Microsoft")?window[a]:document[a]}function vc(a){if(H(cd))return alert("soundcloudApiKey has not been set! Skipping Soundcloud url."),G.shift(),T(),!1;/\/favorites$/.test(a)&&(a=a.replace(/\/favorites$/,"/likes"));var b=Xe(a,cd);f.ajax({url:b,dataType:"jsonp",cache:!1}).done(function(b){var h,
g;if(b.tracks){h=b.tracks.length;h>ta&&(h=ta);for(g=0;g<h;g++)b.tracks[g].streamable&&b.tracks[g].stream_url?z.push(dd(b.tracks[g])):(h+=1,h>b.tracks.length&&(h=b.tracks.length));z.length>ta&&(z=z.slice(0,ta));Va()}else if(b.duration)b.permalink_url=a,b.streamable&&b.stream_url&&z.push(dd(b)),z.length>ta&&(z=z.slice(0,ta)),Va();else if(b.username)/likes/.test(a)?(console.log("DATA.USERNAME.LIKES"),jb=b.uri+"/likes"):/favorites/.test(a)?(console.log("DATA.USERNAME.FAVOURITES"),jb=b.uri+"/favorites"):
jb=b.uri+"/tracks",vc(jb);else if(f.isArray(b)){h=b.length;h>ta&&(h=ta);for(g=0;g<h;g++)b[g].streamable&&b[g].stream_url?z.push(dd(b[g])):(h+=1,h>b.length&&(h=b.length));h==$d?(Zb+=$d,Zb<ta?vc(jb):(z.length>ta&&(z=z.slice(0,ta)),Va())):(z.length>ta&&(z=z.slice(0,ta)),Va())}else b.kind&&"group"==b.kind?(jb=b.uri+"/tracks",vc(jb)):(G.shift(),T())}).fail(function(b,h,g){v&&alert("Playlist process failed, soundcloud: "+a);G.shift();T()})}function dd(a){var b={type:"soundcloud"};a.duration&&(b.length=
a.duration);b.mp3=a.stream_url+(/\?/.test(a.stream_url)?"&":"?")+"consumer_key="+cd;b.ogg="";b.title=a.title;ma&&(b.url=ma);a.downloadable&&a.download_url?(P&&(b.dlink=P),U&&(b.download=U)):(P&&1!=P&&"true"!=P&&(b.dlink=P),U&&1!=U&&"true"!=U&&(b.download=U));a.artwork_url?b.thumb=a.artwork_url:fa&&(b.thumb=fa);return b}function Xe(a,b){return(/api\./.test(a)?a+"?":"http://api.soundcloud.com/resolve?url="+a+"&")+"format=json&offset="+Zb+"&consumer_key="+b+"&callback=?"}function Dd(){var a=z[cb].mp3+
"?rand="+99999999*Math.random();ID3.loadTags(a,function(){var b=ID3.getAllTags(a);console.log(b);b.title&&(z[cb].title=b.title);b.artist&&(z[cb].artist=b.artist);b.album&&(z[cb].album=b.album);if(b=b.picture){var c="",h=0,g=b.data.length;for(h;h<g;h++)c+=String.fromCharCode(b.data[h]);z[cb].thumb="data:"+b.format+";base64,"+window.btoa(c)}cb++;cb<z.length?Dd():Va()},{tags:["title","artist","album","picture"],onError:function(a){}})}function Qe(){if(X){var a=A.getCurrentTime(),b=A.getDuration();Ga=
A.getVideoBytesLoaded()/A.getVideoBytesTotal();t(a)&&t(b)?(lc=!1,Ha.html(Kb(a)+kb),Ia.html(Lb(b)),da)?xa&&(t(Ga)&&Z(Ga),ra=a/b,!ga&&E&&(Ec||Ra(a/b))):(t(Ga)&&La.width(Ga*J),ga||wa.width(a/b*J)):lc=!0}}function ae(){var a=p.currentTime,b=p.duration;void 0!=p.buffered&&0!=p.buffered.length&&t(b)&&(Ga=p.buffered.end(0)/b);t(a)&&t(b)&&(Ha&&Ha.html(Kb(a)+kb),Ia&&Ia.html(Lb(b)));if(da)xa&&(t(Ga)&&Z(Ga),t(a)&&t(b)&&(ra=a/b,!ga&&E&&Ra(a/b)));else{if(t(Ga)){var c=Ga*J;c>J&&(c=J);La&&La.width(c)}t(a)&&t(b)&&
!ga&&wa&&wa.width(a/b*J)}}function Ac(){"undefined"!==typeof audioPlayerSoundEnd&&audioPlayerSoundEnd(O,L,u.getCounter());Pa();u.advanceHandler(1,!0)}function Bc(){Nc||("undefined"!==typeof audioPlayerSoundStart&&audioPlayerSoundStart(O,L,u.getCounter()),Nc=!0);"undefined"!==typeof audioPlayerSoundPlay&&audioPlayerSoundPlay(O,L,u.getCounter());da&&xa&&ya()}function Cc(){"undefined"!==typeof audioPlayerSoundPause&&audioPlayerSoundPause(O,L,u.getCounter())}function Zc(){if("youtube"==ca)X?(Ne(),isMobile&&
!Ob&&ea&&(m=!1,oc("on"))):("undefined"!==typeof l(D)&&(l(D).pb_play(na,0,100,100,"youtube",ea),V=!0),sc=Sa=!0);else if(Q){if(!be){var a="",a=Ye?a+'<audio class="hap_audio_cont" preload="auto">':a+'<audio class="hap_audio_cont" preload="none">';ce.html(a+"</audio>");Xb=ce.find(".hap_audio_cont");p=Xb[0];p.volume=C;be=!0}lb?p.src=na:ec&&(p.src=yb);ea&&(p.load(),p.play());Xb.on("ended",function(a){Ac()}).on("pause",function(a){Cc()}).on("play",function(a){ha&&clearInterval(ha);ha=setInterval(ae,250);
Bc()}).on("canplay",function(a){Jb&&(p.seekable&&0<p.seekable.length&&(p.currentTime=Jb*p.duration),Jb=null)}).on("canplaythrough",function(a){}).on("loadedmetadata",function(a){}).on("error",function(a){}).on("abort",function(a){}).on("stalled",function(a){}).on("suspend",function(a){});ha&&clearInterval(ha);ha=setInterval(ae,250)}else"undefined"!==typeof l(w)&&l(w).pb_initAudio(na);ea?(E=!0,fb("off")):(E=!1,Ka("off"));q();"youtube"!=ca&&(V=!0);!isMobile&&ea&&A&&A.setAutoPlay(!0);ea=!0}function Ab(){var a=
[k.find(".controls_next"),k.find(".controls_prev"),k.find(".controls_toggle"),k.find(".player_volume"),k.find(".player_download"),k.find(".player_loop"),k.find(".player_shuffle")],b,c=a.length,h=0;for(h;h<c;h++)if(b=f(a[h]).css("cursor","pointer").on(ib,ne),Ze&&!isMobile)b.on("mouseover",oe).on("mouseout",ue);Le();vb?vd(vb):m||Hd()}function Nd(){if(!da&&(J=mc.width(),t(Ga)&&La&&La.width(Ga*J),!ga&&wa)){var a,b;if("youtube"!=ca){if(Q)p&&(a=p.currentTime,b=p.duration);else if("undefined"!==typeof l(w))try{a=
l(w).pb_getFlashPosition,b=l(w).pb_getFlashDuration()}catch(c){}try{a&&t(a)&&b&&t(b)&&wa.width(a/b*J)}catch(h){}}}Md&&!sa&&Jc();Cb&&ua&&ua.checkSize()}function Pc(){de.css("display","none")}function xd(){de.css("display","block")}function td(){ha&&clearInterval(ha);Cb&&ua&&ua.deactivate();nb.html(fc);Ha.html(ed+kb);Ia.html(fd);da?xa&&(ra=0,K.clearRect(0,0,ka,qa),ab.clearRect(0,0,ka,qa)):(wa.width(0),La.width(0));Ka("off");tc.css("display","none")}function Mc(){ha&&clearInterval(ha);hb||(Cb&&ua&&ua.deactivate(),
nb.html(fc));Ha.html(ed+kb);Ia.html(fd);da?xa&&(ra=0,K.clearRect(0,0,ka,qa),ab.clearRect(0,0,ka,qa)):(wa.width(0),La.width(0));Ka("off");tc.css("display","none")}function Ka(a){"on"==a?k.find(".controls_toggle").find("img").attr("src",$e):k.find(".controls_toggle").find("img").attr("src",af);Ea&&Ea.hasClass("play_link")&&Ea.attr("src",zc);da&&(xa?(K.clearRect(0,0,ka,qa),Ra(ra),ya()):"undefined"!==typeof l(ba)&&l(ba).pb_toggle_icon("play"))}function fb(a){"on"==a?k.find(".controls_toggle").find("img").attr("src",
bf):k.find(".controls_toggle").find("img").attr("src",cf);Ea&&Ea.hasClass("play_link")&&Sd.hasClass("hap_text_link")&&Ea.attr("src",Td);da&&(xa?(K.clearRect(0,0,ka,qa),Ra(ra),ya()):"undefined"!==typeof l(ba)&&l(ba).pb_toggle_icon("pause"))}function t(a){return!isNaN(parseFloat(a))&&isFinite(a)}function Kb(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function Lb(a){a=Math.round(a);minutes=Math.floor(a/60);
minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function Ya(a){if("string"===typeof a){if(Vc&&u&&-1!=u.getCounter()){var b=u.getCounter();a=Wc(B[b].id)+Xc+a}}else{if("number"===typeof a){if(!u||0>a||a>F-1)return!1}else if(!u)return!1;b=u.getCounter();a=Kc(b)}Cb&&ua?(ua.input(a),ua.activate()):nb&&nb.html(a)}function Kc(a,b){if("undefined"===typeof b||null===b)b=!0;return B[a]&&B[a].title&&!H(B[a].title)?b?Vc?Wc(B[a].id)+Xc+B[a].title:B[a].title:B[a].title:
fc}function Wc(a){return 9>a?"0"+(a+1):a+1}function df(a){var b=[],c=[],h=0;for(h;h<a;h++)b[h]=h;var h=0,g;for(h;h<a;h++)g=Math.round(Math.random()*(b.length-1)),c[h]=b[g],b.splice(g,1);return c}function ef(a){var b=[],c=0;for(c;c<a;c++)b[c]=c;return b}function Ee(a,b,c){"title"==b?a.sort(function(a,b){return a.title==b.title?0:a.title<b.title?-1:1}):"type"==b&&a.sort(function(a,b){return a.type==b.type?0:a.type<b.type?-1:1});c&&a.reverse()}function H(a){return a?0==a.replace(/^\s+|\s+$/g,"").length:
!0}function De(a){a=a.split(":");for(var b=0,c=1;0<a.length;)b+=c*parseInt(a.pop()),c*=60;return b}function Ce(a){if(window.ActiveXObject&&window.GetObject){var b=new ActiveXObject("Microsoft.XMLDOM");b.loadXML(a);return b}if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");throw Error("No XML parser available");}function ff(a,b){return b-a}function ye(a){if("string"===typeof a)switch(a.toLowerCase()){case "true":case "yes":case "1":return!0;case "false":case "no":case "0":case null:return!1;
default:return Boolean(a)}else if("boolean"===typeof a)return Boolean(a)}function gf(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}function Ed(a){var b,c="",h,g="",d="",e="",k,l,n,m;b=a.type.toLowerCase();a.origtype&&(c=a.origtype.toLowerCase());a.mp3?h=a.mp3:a.path&&(h=a.path);a.ogg&&(g=a.ogg);a.title&&(d=a.title);a.thumb&&(e=a.thumb);a.download&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?1==a.download||"true"==a.download||H(a.download)||
(k=a.download):k=1==a.download?h:a.download);a.url&&(n=a.url);a.dlink&&("youtube_single"==b||"youtube_single_list"==b||"youtube_playlist"==b?1==a.dlink||"true"==a.dlink||H(a.dlink)||(l=a.dlink):l=1==a.dlink?h:a.dlink);"local"==b?"title"==Xa?m="<li class= 'playlistItem' data-type='local' data-origtype='"+c+"' data-mp3='"+h+"' data-ogg='"+g+"' data-thumb='"+e+"' data-title='"+d+"'><a class='playlistNonSelected' href='#'>"+d+"</a></li>":"thumb"==Xa?m="<li class= 'playlistItem' data-type='local' data-origtype='"+
c+"' data-mp3='"+h+"' data-ogg='"+g+"' data-thumb='"+e+"' data-title='"+d+"'><a class='playlistNonSelected' href='#'><img src='"+e+"' alt='thumb'/></a></li>":"all"==Xa&&(m="<li class= 'playlistItem' data-type='local' data-origtype='"+c+"' data-mp3='"+h+"' data-ogg='"+g+"' data-thumb='"+e+"' data-title='"+d+"'><a class='playlistNonSelected' href='#'><span class='hap_thumb'><img src='"+e+"' alt='thumb'/></span><span class='hap_title'><p>'"+d+"'</p></span></a></li>"):(m="<li class= 'playlistItem' data-type='"+
b+"' data-path='"+h+"' data-thumb='"+e+"'></li>","database_data"==b&&(h=a.table?a.table:null,c=a.limit?a.limit:null,a=a.range?a.range:null,h&&(h=' data-table="'+h+'" ',g=m.match(/\>/),m=m.slice(0,g.index)+h+m.slice(g.index)),c&&(h=' data-limit="'+c+'" ',g=m.match(/\>/),m=m.slice(0,g.index)+h+m.slice(g.index)),a&&(h=' data-range="'+a+'" ',g=m.match(/\>/),m=m.slice(0,g.index)+h+m.slice(g.index))));k&&(h=' data-download="'+k+'" ',g=m.match(/\>/),m=m.slice(0,g.index)+h+m.slice(g.index));"local"==b?(l&&
(h="<a class='dlink' href='#' data-dlink='"+l+"'><img src='"+Jd+"' alt='download'/></a>",g=m.match(/\<\/a\>\<\/li\>/),m=m.slice(0,g.index)+h+m.slice(g.index)),n&&(h="<a class='plink' href='"+n+"' target='_blank'><img src='"+Id+"' alt='purchase'/></a>",g=m.match(/\<\/a\>\<\/li\>/),m=m.slice(0,g.index)+h+m.slice(g.index))):(l&&(h=' data-dlink="'+l+'" ',g=m.match(/\>/),m=m.slice(0,g.index)+h+m.slice(g.index)),n&&(h=' data-plink="'+n+'" ',g=m.match(/\>/),m=m.slice(0,g.index)+h+m.slice(g.index)));b=document.createElement("ul");
b.innerHTML=m;return f(b.firstChild)}function Sc(a){a=f(a);var b;a=f("<div>").append(a.clone()).html();b=document.createElement("ul");b.innerHTML=a;return f(b.firstChild)}function Db(a){F=B.length;if(0<F){xc();var b=u.getCounter();a==b?(sd(),u.setPlaylistItems(F)):(u.setPlaylistItems(F,!1),a<b&&u.reSetCounter(u.getCounter()-1));hb&&Ya()}else Ub(),vb=null,"undefined"!==typeof playlistEmpty&&playlistEmpty(O,L)}var m=!1,O=this;f("body");var Ld=f(window),Qa=f(document),Pe=f.inArray(window.location.protocol,
["http:","https:"])?"http:":window.location.protocol,gd,Eb=navigator.userAgent,zb;if(-1<Eb.indexOf("iPhone")||-1<Eb.indexOf("iPod")||-1<Eb.indexOf("iPad"))-1<Eb.indexOf("iPhone")?zb="iPhone":-1<Eb.indexOf("iPod")?zb="iPod":-1<Eb.indexOf("iPad")&&(zb="iPad");var ke=-1<navigator.userAgent.toLowerCase().indexOf("safari/"),gc=document.createElement("audio"),lb,ec,X=!1;gc.canPlayType?(X=!0,lb=!!gc.canPlayType&&""!=gc.canPlayType("audio/mpeg"),ec=!!gc.canPlayType&&""!=gc.canPlayType('audio/ogg; codecs="vorbis"')):
(lb=!0,ec=!1);var ve=hap_source_path+e.buttonsUrl.prev,pe=hap_source_path+e.buttonsUrl.prevOn,we=hap_source_path+e.buttonsUrl.next,qe=hap_source_path+e.buttonsUrl.nextOn,af=hap_source_path+e.buttonsUrl.play,$e=hap_source_path+e.buttonsUrl.playOn,cf=hap_source_path+e.buttonsUrl.pause,bf=hap_source_path+e.buttonsUrl.pauseOn,pc=hap_source_path+e.buttonsUrl.loop,Rb=hap_source_path+e.buttonsUrl.loopOn,id=hap_source_path+e.buttonsUrl.volume,re=hap_source_path+e.buttonsUrl.volumeOn,jd=hap_source_path+e.buttonsUrl.mute,
se=hap_source_path+e.buttonsUrl.muteOn,qc=hap_source_path+e.buttonsUrl.shuffle,Sb=hap_source_path+e.buttonsUrl.shuffleOn,xe=hap_source_path+e.buttonsUrl.download,te=hap_source_path+e.buttonsUrl.downloadOn,Id=hap_source_path+e.buttonsUrl.trackUrlIcon,Jd=hap_source_path+e.buttonsUrl.trackDownloadIcon,Fe=hap_source_path+e.buttonsUrl.trackRemoveIcon,Td=hap_source_path+e.buttonsUrl.link_pause,zc=hap_source_path+e.buttonsUrl.link_play,k=f(this).css("display","block"),da=k.hasClass("hap_circle"),xa=!1;X&&
gf()&&(xa=!0);var yd="html5audio-popup"==k.attr("id"),sb=k.find(".playlistHolder"),Oa=k.find(".playlist_inner").css("opacity",0);k.find(".playerHolder");k.find(".player_mediaTime");var Ha=k.find(".player_mediaTime_current"),Ia=k.find(".player_mediaTime_total"),he=k.find(".player_mediaName_Mask"),nb=k.find(".player_mediaName");k.find(".player_controls");var hf=k.find(".player_volume"),de=k.find(".preloader"),tc=k.find(".player_download");k.find(".componentPlaylist");var bb=f(e.playlistList);yd&&window.opener&&
(bb=window.opener.jQuery(e.playlistList));var Fd=new APHAPYTLoader(e);f(Fd).on("APHAPYTLoader.END_LOAD",function(a,b){var c,h=b.length,d;for(c=0;c<h;c++)d=b[c],d.description=d.description?d.description.replace(/["']/g,""):null,ma&&(d.url=ma),P&&(d.dlink=P),U&&(d.download=U),z.push(d);z.length>ee&&(z=z.slice(0,ee));Va()});var L=e.sound_id,ea=e.autoPlay,Oe=e.autoPlay,Xd=e.autoPlay,Ye=e.autoLoad;isMobile&&(ea=!1,Xd=e.autoPlay=!1);var jf=e.useOnlyMp3Format,cd=e.soundcloudApiKey,ta=e.soundcloud_result_limit,
Be=e.podcast_result_limit,ee=e.yt_playlist_result_limit,cc=e.ofm_result_limit,Cb=e.useSongNameScroll,hb=e.autoSetSongTitle,Ba=e.loopingOn,Ca=e.randomPlay,kb=e.mediaTimeSeparator,md=e.seekTooltipSeparator,fc=e.defaultArtistData,Vc=e.useNumbersInPlaylist,Xc=e.titleSeparator,vb=e.activePlaylist,v=e.useAlertMessaging,Md=e.activatePlaylistScroll,Nb=e.playlistScrollOrientation.toLowerCase(),He=e.sortablePlaylistItems,Ie=e.autoReuseMailForDownload,Kd=e.useRemoveBtnInTracks,kf=e.useVolumeTooltip,lf=e.useSeekbarTooltip,
Xa=e.playlistItemContent.toLowerCase(),mf=e.useKeyboardNavigation,Ze=e.useBtnRollovers,ud=e.usePlaylistRollovers,Cd=e.getTrackInfoFromID3;Ha.html("0:00");Ia.html("0:00");var ed=Ha.html(),fd=Ia.html();nb.html(fc);Ha.html(ed+kb);Ia.html(fd);var Q=!0;if(!X||!lb&&jf)Q=!1;var cb,gb,Da,Wb,ub,tb,sa=!1,zd="hap_processed",Ad="hap_draggable",Rc,ma,Od,Yc,Ta,P,U,rc,fa,uc,Sd,Ea,Yb,Oc,Uc=!1;void 0!=sb.attr("data-playlistLocked")&&(Uc=!0);var Pb="playlist_locked",Vb=!1,ac,r,x=null,y=!0,lc=!1,Nc=!1,jb,Zb,$d=50,ca,
V=!1,na="",yb="",E=!1,Ud=hap_source_path+"includes/ba-simple-proxy.php",ha,Ga;Ba&&k.find(".player_loop").find("img").attr("src",Rb);Ca&&k.find(".player_shuffle").find("img").attr("src",Sb);var B=[],Ua=[],S=[],F=0,aa,wd,Bd=f('<div class="hap_feedParser"/>'),Je=0==k.find("iframe[id='dl_iframe']").length?f('<iframe id="dl_iframe"/>').css({position:"absolute",left:"-10000px",display:"none"}).appendTo(k):k.find("iframe[id='dl_iframe']"),wb=f("<div/>"),Qc=f("<div/>");if(isMobile)var bc,Ke=1E3,yc=0==sb.find("div[id='download_confirm']").length?
f('<div id="download_confirm"><p>DOWNLOAD STARTING</p></DIV>').css({opacity:0,zIndex:1E3}).appendTo(sb):sb.find("div[id='download_confirm']");var z=[],G=[],w=e.flashAudio,ba=e.circleMain;if(Q)var be=!1,Xb,p,ce=f('<div class="hap_audioHolder"/>');var A,Wd=!1,dc,D=e.flashYoutube,Fa,sc=!1,Sa=!1,Ob=!1,bd,ad=!1,Wa=[],Tc,wc,xb,$c,ua;Cb&&d();var u=f.playlistManager({randomPlay:Ca,loopingOn:Ba});f(u).on("ap_PlaylistManager.COUNTER_READY",function(){var a=u.getCounter(),b=B[a];b&&!Uc&&(rd(),hb&&Ya(),ca=b.origtype?
b.origtype:b.type,na=b.mp3,yb=b.ogg,b.download?rc=!0:rc=null,Tb(),Zc(),"undefined"!==typeof itemTriggered&&itemTriggered(O,L,a))});f(u).on("ap_PlaylistManager.PLAYLIST_END",function(){rd();"undefined"!==typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(O,L);E=!1;Ka("off")});f(u).on("ap_PlaylistManager.PLAYLIST_END_ALERT",function(){"undefined"!==typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(O,L)});var ib="",pb="",qb="",Ja;"ontouchstart"in window?(Ja=!0,ib="touchstart.ap",pb="touchmove.ap",
qb="touchend.ap"):(Ja=!1,ib="mousedown.ap",pb="mousemove.ap",qb="mouseup.ap");var Hb=!1,Dc,hc=!1,C=e.defaultVolume;0>C&&(C=0);0==C?Dc=.5:1<C&&(C=1);var ja=k.find(".volume_seekbar").css("cursor","pointer").on(ib,function(a){ob(a);return hc=!1}),Gb="horizontal";void 0!=ja.attr("data-orientation")&&(Gb=ja.attr("data-orientation").toLowerCase());if(void 0!=ja.attr("data-autoHide")){var jc=function(){W&&clearTimeout(W);ja.css("display","none");Qb=!1},Hb=!0,Qb=!1,W,kc=parseInt(ja.attr("data-autoHide"),
10);if(!isMobile)hf.on("mouseover",function(){if(!m)return!1;W&&clearTimeout(W);ja.css("display","block");Qb=!0;return!1}).on("mouseout",function(){if(!m)return!1;W&&clearTimeout(W);W=setTimeout(jc,kc);return!1})}var Fb=!1,ia=0,ic=k.find(".volume_level"),rb=k.find(".volume_bg");if(kf&&!isMobile){ja.on("mouseover",I);var Ma=k.find(".player_volume_tooltip"),ie=parseInt(Ma.css("top"),10);Ma.on("mouseenter",function(){ja.off("mouseover",I);Ma.css("display","none")}).on("mouseleave",function(){ja.on("mouseover",
I)})}else k.find(".player_volume_tooltip").remove();var db,Jb,ga=!1,mc=k.find(".progress_bg"),La=k.find(".load_progress"),wa=k.find(".play_progress"),Za=k.find(".player_progress"),J=mc.width(),Ec=!1;if(da){var mb=k.find(".load_canvas").css("cursor","pointer"),hd=k.find(".play_canvas"),Na=k.find(".circlePlayer"),fe=parseFloat(Na.attr("data-offOpacity"),10),ge=parseFloat(Na.attr("data-onOpacity"),10);isMobile&&(fe=ge=1);var Bb={flash_id:e.flash_id,strokeSize:parseInt(Na.attr("data-strokeSize"),10),
play_color:hd.attr("data-bgcolor"),load_color:mb.attr("data-bgcolor"),tolerance:parseInt(Na.attr("data-tolerance"),10),offOpacity:fe,onOpacity:ge,circleWidth:mb.width(),circleHeight:mb.height()};if(xa){var Mb=Bb.strokeSize,Ic=Bb.play_color,le=Bb.load_color,K=mb[0].getContext("2d"),ab=hd[0].getContext("2d"),nd=2*Math.PI,nc=Math.PI/2,ka=Bb.circleWidth,qa=Bb.circleHeight,Hc=ka/2,ld=Hc-Mb,je=e.tolerance,kd,Gc=!1,ra=0;mb.on(ib,function(a){Gc=Fc(a)?!1:!0;R(a);return!1});Za=mb}else mb.remove(),hd.remove()}else Za=
k.find(".player_progress").css("cursor","pointer").on(ib,function(a){R(a);return!1});if(lf&&!isMobile){Za.on("mouseover",Y);var Aa=k.find(".player_progress_tooltip").css("zIndex",50);Aa.find("p").html("0:00"+md+"0:00");Aa.on("mouseenter",function(){Za.off("mouseover",Y);Aa.css("display","none")}).on("mouseleave",function(){Za.on("mouseover",Y)})}else k.find(".player_progress_tooltip").remove();this.flashVideoPause=function(){Ka("off");E=!1;Cc()};this.flashVideoResume=function(){fb("off");E=!0;Bc()};
this.flashVideoEnd=function(){Ac()};this.flashVideoStart=function(){fb("off");V=E=!0;Bc()};this.flashYoutubeData=function(a,b,c,d){da?(t(a)&&t(b)&&"undefined"!==typeof l(ba)&&l(ba).pb_drawLoadbar(a/b),t(c)&&t(d)&&(ra=c/d,ga||"undefined"!==typeof l(ba)&&l(ba).pb_drawSeekbar(c/d))):(t(a)&&t(b)&&La&&La.width(a/b*J),t(c)&&t(d)&&wa&&wa.width(c/d*J));t(c)&&t(d)&&(Ha&&Ha.html(Kb(c)+kb),Ia&&Ia.html(Lb(d)))};this.flashAudioData=function(a,b,c,d){a/=b;da?xa?(t(a)&&Z(a),t(c)&&t(d)&&(ra=c/d,!ga&&E&&Ra(c/d))):
(null!==a&&"undefined"!==typeof l(ba)&&l(ba).pb_drawLoadbar(a),t(c)&&t(d)&&(ra=c/d,ga||"undefined"!==typeof l(ba)&&l(ba).pb_drawSeekbar(c/d))):(!ga&&wa&&wa.width(c/d*J),null!==a&&(a*=J,a>J&&(a=J),La&&La.width(a)),t(c)&&t(d)&&(Ha&&Ha.html(Kb(c)+kb),Ia&&Ia.html(Lb(d))))};this.flashAudioEnd=function(){Ac()};this.flashCircleToggle=function(a){Ib()};this.flashCircleOverLoader=function(a){Aa.css("display","block");$a(a)};this.flashCircleOutLoader=function(){Aa.css("display","none")};this.flashCircleSeek=
function(a){za(a)};this.embedFlash=function(){if(X)e.useOnlyMp3Format&&!lb&&(a=w.substr(1),embedFlashAudio(a));else{var a=D.substr(1);embedFlashMain(a);a=w.substr(1);embedFlashAudio(a);da&&(a=ba.substr(1),embedFlashCircle(a))}};mf&&Qa.keyup(function(a){if(!m||y)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=a.keyCode;37==a?O.previousAudio():39==a?O.nextAudio():32==a?O.toggleAudio():77==a&&(M(),q());return!1});Ld.resize(function(){if(!m||y)return!1;
gd&&clearTimeout(gd);gd=setTimeout(Nd,150)});this.setPlayIcon=function(){Ea&&Ea.hasClass("play_link")&&Ea.attr("src",zc);E=!1};this.playAudio=function(){if(!m||y||!x||E||!V)return!1;if("youtube"==ca){if(!Sa)return!1;X?A.togglePlayback():"undefined"!==typeof l(D)&&l(D).pb_togglePlayback()}else Q?p&&p.play():"undefined"!==typeof l(w)&&l(w).pb_play();fb("off");V=E=!0};this.pauseAudio=function(){if(!m||y||!x||!E||!V)return!1;if("youtube"==ca){if(!Sa)return!1;X?A.togglePlayback():"undefined"!==typeof l(D)&&
l(D).pb_togglePlayback()}else Q?p&&p.pause():"undefined"!==typeof l(w)&&l(w).pb_pause();Ka("off");E=!1};this.toggleAudio=function(){if(!m||y||!x||!V)return!1;Ib()};this.stopAudio=function(){if(!m||y||!x||!V)return!1;if("youtube"==ca){if(!Sa)return!1;X?A.stop():"undefined"!==typeof l(D)&&l(D).pb_dispose()}else Q?p&&(p.src="",lb?p.src=na:ec&&(p.src=yb)):"undefined"!==typeof l(w)&&l(w).pb_dispose();Mc();E=!1};this.checkAudio=function(a){if(!m||y||!x)return!1;a=a.toLowerCase();if(E){if("pause"==a)if("youtube"==
ca){if(!Sa)return!1;X?A.togglePlayback():"undefined"!==typeof l(D)&&l(D).pb_togglePlayback()}else Q?p&&p.pause():"undefined"!==typeof l(w)&&l(w).pb_pause();else if("stop"==a){if("youtube"==ca){if(!Sa)return!1;A.stop()}else Q?p&&(p.src="",lb?p.src=na:ec&&(p.src=yb)):"undefined"!==typeof l(w)&&l(w).pb_dispose();Mc()}E=!1;Ka("off")}};this.nextAudio=function(){if(!m||y||!x)return!1;Pa();u.advanceHandler(1,!0)};this.previousAudio=function(){if(!m||y||!x)return!1;Pa();u.advanceHandler(-1,!0)};this.loadAudio=
function(a){if(!m||y||!x)return!1;if("string"===typeof a){var b=0,c=!1;for(b;b<F;b++)if(a==B[b].title){a=b;c=!0;break}if(!c)return v&&alert('Track with name "'+a+'" doesnt exist. Load audio failed.'),!1}else if("number"===typeof a){if(0>a||a>F-1)return v&&alert('Invalid track number. Track number  "'+a+'" doesnt exist. Load audio failed.'),!1}else return v&&alert("Load audio method requires either a track number or a track title to load. Load audio failed."),!1;Pa();u.processPlaylistRequest(a)};this.loadPlaylist=
function(a){if(!m||y)return!1;if("undefined"===typeof a)return v&&alert("loadPlaylist method requires data parameter. loadPlaylist failed."),!1;vb=a;vd(vb)};this.addTrack=function(a,b,c,d){if(!m||y)return!1;if("undefined"===typeof a)return v&&alert("addTrack method requires type parameter. AddTrack failed."),!1;if("undefined"===typeof b)return v&&alert("addTrack method requires format parameter. AddTrack failed."),!1;if("undefined"===typeof c)return v&&alert("addTrack method requires track parameter. AddTrack failed."),
!1;var g=1,e=!1;if("string"!==typeof c&&"[object Object]"!==Object.prototype.toString.call(c))if("[object Array]"===Object.prototype.toString.call(c))g=c.length,e=!0;else return v&&alert("addTrack method requires track as string, object or array parameter. AddTrack failed."),!1;Da=d;a=a.toLowerCase();"visible"==a?(x&&sa&&Ub(),Wb=!0,sa=!1):(x&&!sa&&Ub(),sa=ub=!0);gb=!1;if(x)if("undefined"!==typeof Da){if(0>Da||Da>F)return v&&alert('Invalid position to insert track to. Position number "'+d+'" doesnt exist. AddTrack failed.'),
!1;Da==F&&(gb=!0)}else gb=!0,Da=F;else{if("undefined"!==typeof Da){if(0!=Da)return v&&alert('Invalid position to insert track to. Position number "'+d+'" doesnt exist. AddTrack failed.'),!1}else Da=0;gb=!0}xd();y=!0;Vb=!1;d=0;var k;k="playlist"+Math.floor(9999*Math.random());var l=f("<ul id = "+k+"></ul>");b=b.toLowerCase();for(d;d<g;d++)k=e?c[d]:c,"html"==b?Sc(k).appendTo(l):(k.type&&k.mp3||k.path)&&Ed(k).appendTo(l);G=[];wb.empty();l.appendTo(wb).find("li[class='playlistItem']").each(function(){G.push(f(this))});
tb=!1;x||(tb=!0,x="visible"==a?Oa:Qc);T()};this.inputAudio=function(a){if(!m||y)return!1;if("undefined"===typeof a)return v&&alert("inputAudio method requires data parameter. inputAudio failed."),!1;if("undefined"===a.mp3)return v&&alert("inputAudio method requires data.mp3 parameter. inputAudio failed."),!1;Pa();u.reSetCounter();na=a.mp3;"undefined"!==a.ogg&&(yb=a.ogg);"undefined"!==a.title?Ya(a.title):Ya(fc);isMobile&&(ea=!0,Q||"undefined"!==typeof l(w)&&l(w).pb_setAutoplay(!0));Tb();Zc()};this.removeTrack=
function(a){if(!m||y||!x)return!1;if("undefined"===typeof a)return v&&alert("removeTrack method requires track parameter. removeTrack failed."),!1;if("string"===typeof a){var b=0,c=!1;for(b;b<F;b++)if(a==B[b].title){a=b;c=!0;break}if(!c)return v&&alert('Track with name "'+a+'" doesnt exist. RemoveTrack failed.'),!1;S[a]&&B[a]?(S[a].remove(),B.splice(a,1),Db(a)):v&&alert('RemoveTrack with name "'+a+'" failed.')}else if("number"===typeof a){if(0>a||a>F-1)return v&&alert('Invalid track number. Track number  "'+
a+'" doesnt exist. RemoveTrack failed.'),!1;S[a]&&B[a]?(S[a].remove(),B.splice(a,1),Db(a)):v&&alert('RemoveTrack with name "'+a+'" failed.')}else if("[object Array]"===Object.prototype.toString.call(a))if("string"===typeof a[0]?b=!0:"number"===typeof a[0]&&(b=!1),b){var b=0,c=a.length,d,g,f;b;a:for(;b<c;b++)if(g=a[b],"string"===typeof g){f=0;d=B.length;if(0==d){Db();break a}for(f;f<d;f++)if(g==B[f].title&&S[f]&&B[f]){S[f].remove();B.splice(f,1);Db(f);break}}}else a:for(a.sort(ff),b=0,c=a.length,b;b<
c;b++){if(g=a[b],"number"===typeof g){d=B.length;if(0==d){Db();break a}-1<g&&g<d&&S[g]&&B[g]&&(S[g].remove(),B.splice(g,1),Db(g))}}else return v&&alert("removeTrack method requires track parameter as string, number or array. removeTrack failed."),!1};this.destroyAudio=function(){if(!m||y||!x)return!1;sd()};this.destroyPlaylist=function(){if(!m||y||!x)return!1;Ub()};this.setTitle=function(a){if(!m||y||!x)return!1;Ya(a)};this.toggleShuffle=function(){if(!m||y)return!1;Ca?(k.find(".player_shuffle").find("img").attr("src",
qc),Ca=!1):(k.find(".player_shuffle").find("img").attr("src",Sb),Ca=!0);u.setRandom(Ca)};this.toggleLoop=function(){if(!m||y)return!1;Ba?(k.find(".player_loop").find("img").attr("src",pc),Ba=!1):(k.find(".player_loop").find("img").attr("src",Rb),Ba=!0);u.setLooping(Ba)};this.setVolume=function(a){if(!m||y)return!1;0>a?a=0:1<a&&(a=1);C=a;q()};this.getVolume=function(){return m?C:!1};this.setAutoPlay=function(a){if(!m)return!1;ea=a;Q||"undefined"!==typeof l(w)&&l(w).pb_setAutoplay(a)};this.getAutoPlay=
function(){return m?ea:!1};this.getIsMobile=function(){return isMobile};this.getMobileType=function(){return zb};this.getSetupDone=function(){return m};this.getPlaylistLoaded=function(){return Vb};this.getPlaylistTransition=function(){return y};this.getMediaPlaying=function(){return!m||y?!1:E};this.getAudioInited=function(){return!m||y?!1:V};this.getMediaType=function(){return!m||y?!1:ca};this.getActiveItem=function(){return!m||y?!1:u.getCounter()};this.getPlaylistItems=function(a){if(!m||y||!S||
0==S.length)return!1;if("string"===typeof a)return S;if("number"===typeof a)return 0>num||num>F-1||!S[num]?!1:S[num]};this.getMediaCount=function(){return!m||y?!1:t(F)?F:0};this.getPlaylistHidden=function(){return!m||y?!1:sa};this.get_hidden_playlist_holder=function(){return m?Qc:!1};this.getPlaylistList=function(){return m&&bb&&0!=bb.length?bb:!1};this.orderPlaylist=function(a,b){if(!m||!x)return!1;if("undefined"===typeof a)return v&&alert("orderPlaylist method requires action parameter. orderPlaylist failed."),
!1;var c=x.children("li"),d=c.length;if(0==d)return!1;var g=a.toLowerCase();if("reverse"==g)x.append(c.get().reverse());else if("random"==g||"remap"==g||"swap"==g){if("random"==g)b=df(d);else if("remap"==g){if("undefined"===typeof b||b.length!=d)return!1}else if("swap"==g){if("undefined"===typeof b||2!=b.length)return!1;c=ef(d);c.splice(b[1],1,b[0]);c.splice(b[0],1,b[1]);b=f.extend(!0,[],c)}else return!1;orderedItems=jQuery.map(b,function(a){return jQuery(S).get(a)});x.empty().html(orderedItems)}else return v&&
alert("Wrong action parameter for orderPlaylist method. orderPlaylist failed."),!1;xc();if(c=Oa.find("a[class=playlistSelected]").attr("data-id"))u.reSetCounter(c),hb&&Ya()};this.checkScroll=function(){if(!m||y||!x)return!1;Jc()};this.reinitScroll=function(){if(!m||y||!x)return!1;aa&&(aa.reinitialise(),"vertical"==Nb?(aa.scrollToY(0),f(".jspPane").css("top","0px")):(aa.scrollToX(0),f(".jspPane").css("left","0px")));Cb&&ua&&u&&-1!=u.getCounter()&&hb&&Ya()};this.getPlaylistData=function(){return m&&
!y&&x?B:!1};this.getSoundId=function(){return m?L:!1};this.getTouch=function(){return m?Ja:!1};this.get_hap_source_path=function(){return m?hap_source_path:!1};X?(f(".flashMain").remove(),f(".circleMain").remove(),Q?(f(".flashAudio").remove(),Ab()):Ue()):Re();return this}})(jQuery);
(function(f){f.APHAPYTLoader=function(e){function d(){if(n.length){I=n.shift();q=I.type;var d=I.path;R=[];la=0;Y=1;eb=I.limit?I.limit:200;$a=I.order?I.order:"relevance";if("youtube_single"==q||"youtube_single_list"==q)d="https://www.googleapis.com/youtube/v3/videos?id="+d+"&key="+Z+"&part=snippet,contentDetails,statistics,status";else if(-1==$.inArray($a,Ra)&&($a="relevance"),"youtube_playlist"==q)d="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+
d+"&key="+Z+"";else if("youtube_video_query"==q)d="https://www.googleapis.com/youtube/v3/search?part=id,snippet&type=video&maxResults=50&order="+$a+"&q="+(I.query||I.path)+"&key="+Z+"";else if("youtube_user_channels"==q)d="https://www.googleapis.com/youtube/v3/channels?part=contentDetails&maxResults=50&forUsername="+d+"&key="+Z+"";else if("youtube_channel"==q)d="https://www.googleapis.com/youtube/v3/channels?part=snippet,contentDetails&id="+d+"&key="+Z+"";else{alert("Wrong youtube type V3!");return}ob(d)}else $(M).trigger("APHAPYTLoader.END_LOAD",
[N])}function ob(f){$.ajax({url:f,dataType:"jsonp"}).done(function(f){f.error&&f.error.message&&alert(f.error.message);var e,n=f.items.length;n+la>eb&&(n=eb-la);for(e=0;e<n;e++)if(_item=f.items[e])"youtube_playlist"==q||"youtube_single"==q||"youtube_single_list"==q?("private"!=_item.status.privacyStatus&&N.push(oa(_item,q)),la++):"youtube_video_query"==q?(N.push(oa(_item,q)),la++):"youtube_user_channels"!=q&&"youtube_channel"!=q||R.push(_item.contentDetails.relatedPlaylists.uploads);if("youtube_single"==
q||"youtube_single_list"==q)d();else if("youtube_user_channels"!=q&&"youtube_channel"!=q)if(Y+=50,Y<eb)if(Y<=f.pageInfo.totalResults&&f.nextPageToken){e=I.path;if("youtube_playlist"==q)var ya="https://www.googleapis.com/youtube/v3/playlistItems?pageToken="+f.nextPageToken+"&part=snippet,status,contentDetails&maxResults=50&playlistId="+e+"&key="+Z+"";else"youtube_video_query"==q&&(ya="https://www.googleapis.com/youtube/v3/search?pageToken="+f.nextPageToken+"&part=id,snippet&maxResults=50&order="+$a+
"&q="+e+"&key="+Z+"");ob(ya)}else d();else za&&(va++,va<R.length?(Y=0,pa=R[va],ya="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+pa+"&key="+Z+"",ob(ya)):(za=!1,d())),d();else R.length?(1<R.length&&(za=!0),pa=R[va],ya="https://www.googleapis.com/youtube/v3/playlistItems?part=snippet,status,contentDetails&maxResults=50&playlistId="+pa+"&key="+Z+"",q="youtube_playlist",ob(ya)):d()}).fail(function(f,e,n){alert("There was an error retrieveing youtube data: "+
f.responseText);d()})}function oa(d,f){var e=jQuery.extend(!0,{},I);e.deeplink&&"youtube_single"!=e.type&&(e.deeplink+=(la+1).toString());e.data=d;e.type="youtube";e.origtype=f;"youtube_single"==f||"youtube_single_list"==f?e.id=d.id:"youtube_playlist"==f?e.id=d.contentDetails.videoId:"youtube_video_query"==f&&(e.id=d.id.videoId);e.title||(e.title=d.snippet.title?d.snippet.title:null);e.description||(e.description=d.snippet.description?d.snippet.description:null);!e.thumb&&d.snippet.thumbnails?d.snippet.thumbnails.medium?
e.thumb=d.snippet.thumbnails.medium.url:d.snippet.thumbnails.standard&&(e.thumb=d.snippet.thumbnails.standard.url):default_artwork&&(e.thumb=default_artwork);e.mp3=e.id;e.ogg="";return e}var M=this,q,I,n=[],N=[],R=[],va=0,pa,za,Y,la,eb,$a,Ra="date rating relevance title videoCount viewCount".split(" "),Z=e.ytAppId;$.inArray(f.location.protocol,["http:","https:"]);this.setData=function(f){Z&&""!=Z?(N=[],n=$.extend(!0,[],[f]),d()):alert("Youtube APMBI key missing! Please set APMBI key in player settings.")}}})(window);
(function(f){function e(d,e){function oa(d){n.playerReady=!0;n.forcePreviewStop||(f(n).trigger("ap_YoutubePlayer.YT_READY"),"undefined"!==typeof n._player.setVolume&&n._player.setVolume(100*n._defaultVolume),n._autoPlay&&n._player.playVideo())}function M(d){f(n).trigger("ap_YoutubePlayer.QUALITY_CHANGE",[d.data])}function q(d){if(n.forceMainStop&&(n.forceMainStop=!1,"undefined"!==typeof n._player.stopVideo)){n._player.stopVideo();f(n).trigger("ap_YoutubePlayer.FORCE_MAIN_STOP");return}-1!=d.data&&
(0==d.data?(f(n).trigger("ap_YoutubePlayer.END_PLAY"),n.loop&&n._player.playVideo()):1==d.data?(n.forcePreviewStop&&"undefined"!==typeof n._player.stopVideo&&n._player.stopVideo(),n._autoPlay=!0,n.small_embed&&"undefined"!==typeof n._player.setVolume&&n._player.setVolume(100*n._defaultVolume),n._inited||(f(n).trigger("ap_YoutubePlayer.START_PLAY"),n._inited=!0,!n.small_embed&&n.quality?n._player.setPlaybackQuality(n.quality):n.small_embed&&n._player.setPlaybackQuality(n._player.getAvailableQualityLevels()[n._player.getAvailableQualityLevels().length-
1])),f(n).trigger("ap_YoutubePlayer.STATE_PLAYING")):2==d.data?f(n).trigger("ap_YoutubePlayer.STATE_PAUSED"):5==d.data&&f(n).trigger("ap_YoutubePlayer.STATE_CUED"))}function I(d){f(n).trigger("ap_YoutubePlayer.ERROR_HANDLER",[d.data])}var n=this;this.isIE=d.isIE?d.isIE:!1;this.isMobile=d.isMobile;this.initialAutoplay=d.initialAutoplay;this._inited=!1;this._player;this._autoPlay=d.autoPlay;this._defaultVolume=d.defaultVolume;this._youtubeHolder=d.youtubeHolder;this._frameId="ytplayer"+Math.floor(16777215*
Math.random());d.quality&&(this.quality=d.quality);d.small_embed&&(this.small_embed=d.small_embed);d.loop&&(this.loop=d.loop);this.lastID;this.playerReadyInterval=100;this.playerReadyIntervalID;this.playerReady=!1;this.protocol=d.protocol;0==d.youtubeChromeless&&(e.useControls=!0,e.ytShowinfo=!0);var N="?controls="+(e.useControls?1:0).toString(),R="&amp;autohide="+(e.autoHideControls?1:0).toString(),va="&amp;showinfo="+(e.ytShowinfo?1:0).toString(),pa="&amp;modestbranding="+(e.ytModestbranding?1:
0).toString(),za="&amp;rel="+(e.ytRel?1:0).toString(),Y="&amp;theme="+(e.ytTheme?e.ytTheme:"dark");this.forcePreviewStop=this.forceMainStop=!1;this.youtubeVideoIframe=f("<iframe />",{frameborder:0,src:"https://www.youtube.com/embed/"+d.mediaPath+N+za+va+R+"&amp;enablejsapi=1"+Y+pa+"&amp;wmode=transparent",width:"100%",height:"100%",id:this._frameId,webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0});this._youtubeHolder.css("display","block").append(this.youtubeVideoIframe);N=document.createElement("script");
N.src=this.protocol+"//www.youtube.com/iframe_api";R=document.getElementsByTagName("script")[0];R.parentNode.insertBefore(N,R);var la=setInterval(function(){window.YT&&window.YT.Player&&(la&&clearInterval(la),n._player=new YT.Player(n._frameId,{events:{onReady:oa,onPlaybackQualityChange:M,onStateChange:q,onError:I}}))},100);window.onYouTubeIframeAPIReady=function(){}}f.youtubePlayer=function(d,f){return new e(d,f)};e.prototype={clean:function(d){this._player&&("undefined"!==typeof this._player.stopVideo&&
this._player.stopVideo(),this._player=null);this.youtubeVideoIframe&&(this.youtubeVideoIframe.attr("src",""),this.youtubeVideoIframe.remove(),this.youtubeVideoIframe=null);this._youtubeHolder&&this._youtubeHolder.empty().css("display","none")},stopPreview:function(){this.forcePreviewStop=!0},initVideo:function(d,f){this.forcePreviewStop=this.forceMainStop=!1;this.quality=f;if(this.playerReady)this._player&&(this._inited=!1,this._autoPlay?"undefined"!==typeof this._player.loadVideoById&&this._player.loadVideoById(d):
"undefined"!==typeof this._player.cueVideoById&&this._player.cueVideoById(d));else{var e=this;this.lastID=d;this.playerReadyIntervalID||(this.playerReadyIntervalID=setInterval(function(){e.playerReady&&(e.playerReadyIntervalID&&clearInterval(e.playerReadyIntervalID),e.forceMainStop||e.initVideo(e.lastID))},this.playerReadyInterval))}},stop:function(){this.forceMainStop=!0;this._player&&"undefined"!==typeof this._player.stopVideo&&this._player.stopVideo()},play:function(){this._player&&"undefined"!==
typeof this._player.playVideo&&this._player.playVideo()},pause:function(){this._player&&"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo()},togglePlayback:function(d){if(this._player)if(void 0==d){if("undefined"===typeof this._player.getPlayerState)return!1;d=this._player.getPlayerState();1==d?"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo():2==d?"undefined"!==typeof this._player.playVideo&&this._player.playVideo():-1!=d&&5!=d&&0!=d||"undefined"===typeof this._player.playVideo||
this._player.playVideo()}else d?"undefined"!==typeof this._player.playVideo&&this._player.playVideo():"undefined"!==typeof this._player.pauseVideo&&this._player.pauseVideo()},seek:function(d){this._player&&"undefined"!==typeof this._player.seekTo&&this._player.seekTo(d)},isMuted:function(){if(this._player&&"undefined"!==typeof this._player.isMuted)return this._player.isMuted()},getDuration:function(){if(this._player&&"undefined"!==typeof this._player.getDuration)return this._player.getDuration()},
getCurrentTime:function(){if(this._player&&"undefined"!==typeof this._player.getCurrentTime)return this._player.getCurrentTime()},getVideoLoadedFraction:function(){if(this._player&&"undefined"!==typeof this._player.getVideoLoadedFraction)return this._player.getVideoLoadedFraction()},getVideoBytesLoaded:function(){if(this._player&&"undefined"!==typeof this._player.getVideoBytesLoaded)return this._player.getVideoBytesLoaded()},getVideoBytesTotal:function(){if(this._player&&"undefined"!==typeof this._player.getVideoBytesTotal)return this._player.getVideoBytesTotal()},
setVolume:function(d){0>d?vol=0:1<d&&(d=1);this._player&&"undefined"!==typeof this._player.setVolume&&this._player.setVolume(100*d)},getPlayerState:function(){if(this._player&&"undefined"!==typeof this._player.getPlayerState)return this._player.getPlayerState()},setAutoPlay:function(d){this._autoPlay=d},getQualityLevels:function(){return this._player.getAvailableQualityLevels()},getCurrQuality:function(){return this._player.getPlaybackQuality()},setPlaybackQuality:function(d){this._player.setPlaybackQuality(d)}}})(jQuery);
(function(f){function e(d){this._loopingOn=d.loopingOn;this._randomPlay=d.randomPlay;this._playlistItems;this._lastInOrder=!1;this._counter=-1;this._lastPlayedFromPlaylistClick;this._lastRandomCounter;this._randomPaused=!1;this._randomArr=[];this._playlistSelect=!1}f.playlistManager=function(d){return new e(d)};e.prototype={setCounter:function(d,e){"undefined"===typeof e&&(e=!0);this._counter=e?this._counter+parseInt(d,10):parseInt(d,10);this._checkCounter()},getCounter:function(){return this._randomPlay?
this._playlistSelect?this._counter:this._randomArr[this._counter]:this._counter},advanceHandler:function(d){this._playlistSelect=!1;this._randomPaused?this._handleRandomPaused(d):this.setCounter(d)},processPlaylistRequest:function(d){this._playlistSelect=!1;this._randomPlay&&(this._playlistSelect=!0,this._lastPlayedFromPlaylistClick=d,this._randomPaused||(this._lastRandomCounter=this._counter,this._randomPaused=!0));this.setCounter(d,!1)},getLastInOrder:function(){return this._lastInOrder},getRandomPaused:function(){return this._randomPaused},
setPlaylistItems:function(d,e){"undefined"===typeof e&&(e=!0);e&&(this._counter=-1);this._playlistItems=d;this._randomPlay&&this._makeRandomList()},reSetCounter:function(d){"undefined"===typeof d?this._counter=-1:(d=parseInt(d,10),this._playlistItems?(d>this._playlistItems-1?d=this._playlistItems-1:0>d&&(d=0),this._counter=d):this._counter=-1)},setRandom:function(d){(this._randomPlay=d)&&this._makeRandomList();this._randomChange()},setLooping:function(d){this._loopingOn=d},_handleRandomPaused:function(d){var e=
f(this);this._randomPaused=!1;this._lastRandomCounter+d>this._playlistItems-1?(this._counter=this._playlistItems-1,e.trigger("ap_PlaylistManager.COUNTER_READY")):0>this._lastRandomCounter+d?(this._counter=0,e.trigger("ap_PlaylistManager.COUNTER_READY")):this.setCounter(this._lastRandomCounter+d,!1)},_randomChange:function(){this._randomPlay?(this._activeIndexFirst(),this._counter=0):this._randomPaused?(this._counter=this._lastPlayedFromPlaylistClick,this._randomPaused=!1):this._counter=this._randomArr[this._counter]},
_checkCounter:function(){if(isNaN(this._counter))alert("ap_PlaylistManager message: No active media, counter = "+this._counter);else{var d=f(this);this._lastInOrder=!1;this._loopingOn?(this._randomPlay?this._counter>this._playlistItems-1?(this._counter=this._randomArr[this._playlistItems-1],this._makeRandomList(),this._firstIndexCheck(),this._counter=0,d.trigger("ap_PlaylistManager.PLAYLIST_END")):0>this._counter&&(this._counter=this._randomArr[0],this._makeRandomList(),this._lastIndexCheck(),this._counter=
this._playlistItems-1):this._counter>this._playlistItems-1?(this._counter=0,d.trigger("ap_PlaylistManager.PLAYLIST_END")):0>this._counter&&(this._counter=this._playlistItems-1),d.trigger("ap_PlaylistManager.COUNTER_READY")):(this._counter>this._playlistItems-1?(this._counter=this._playlistItems-1,this._lastInOrder=!0):0>this._counter&&(this._counter=0),this._lastInOrder?d.trigger("ap_PlaylistManager.PLAYLIST_END"):d.trigger("ap_PlaylistManager.COUNTER_READY"))}},_makeRandomList:function(){3>this._playlistItems||
(this._randomArr=this._randomiseIndex(this._playlistItems))},_firstIndexCheck:function(){if(this._randomArr[0]==this._counter){var d=this._randomArr.splice(0,1);this._randomArr.push(d)}},_lastIndexCheck:function(){if(this._randomArr[this._playlistItems-1]==this._counter){var d=this._randomArr.splice(this._playlistItems-1,1);this._randomArr.unshift(d)}},_activeIndexFirst:function(){var d,e=this._randomArr.length;for(d=0;d<e;d++)if(this._randomArr[d]==this._counter){if(0==d)break;d=this._randomArr.splice(d,
1);this._randomArr.unshift(parseInt(d,10));break}},_randomiseIndex:function(d){var e=[],f=[],M;for(M=0;M<d;M++)e[M]=M;var q;for(M=0;M<d;M++)q=Math.round(Math.random()*(e.length-1)),f[M]=e[q],e.splice(q,1);return f}}})(jQuery);
(function(f){apTextScroller=function(){function e(){"left"==I&&(N-=f,d.css("left",N+"px"),parseInt(d.css("left"),10)<-q&&(N=-f))}var d,f,oa,M,q,I,n,N=0,R,va,pa,za,Y=!1;this.init=function(e,n,q,N,Z,Y){R=e;d=n;oa=q;I=N;M=Z;f=Y};this.input=function(e){va=e;R.html(e);pa=R.width();var f=e.replace(/\s/g,"&nbsp;")+M;d.html("");d.css("width","auto");d.html(f);q=d.width();if(0!=q){e=f;if(q<=2*oa.width()){for(var n=Math.floor(2*oa.width()/q),I=0;I<n;I++)e+=f;f=q*(n+1)}else e+=f,f=2*q;d.html(e);d.css("width",
f+1+"px");za=e;Y=!0}};this.inputSingle=function(d){};this.activate=function(){this.deactivate();oa.width()>=pa?d.html(va):(d.html(za),n=setInterval(e,100))};this.deactivate=function(){n&&clearInterval(n);"left"==I&&(d.css("left","0px"),N=0)};this.checkSize=function(){Y&&(oa.width()>=pa?(this.deactivate(),d.html(va)):(d.html(za),this.activate()))}}})(jQuery);